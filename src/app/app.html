<div class="flex flex-col h-screen bg-gray-50 dark:bg-gray-900 text-gray-900 dark:text-gray-50">
  <header class="flex-shrink-0 p-4 bg-white dark:bg-gray-800 shadow-md">
    <h1 class="text-xl font-bold text-center">LawGPT</h1>
  </header>

  <main class="flex-grow overflow-y-auto p-4 pb-24">
    <div class="max-w-3xl mx-auto">
      <app-chat-history [messages]="chatHistory()"></app-chat-history>
    </div>
    
    @if (finalRenderedHtml()) {
      <div class="max-w-3xl mx-auto mt-8 p-4 bg-gray-100 dark:bg-gray-800 rounded-lg shadow-md prose prose-slate dark:prose-invert">
        <h2 class="text-xl font-bold mb-4">Final Legal Brief</h2>
        <div [innerHTML]="getSafeHtml()"></div>
      </div>
    }
  </main>

  @if (loading()) {
    <app-loading-stream [statusMessage]="statusMessage()"></app-loading-stream>
  }

  <app-chat-input (messageSent)="userMessage($event)"></app-chat-input>
</div>